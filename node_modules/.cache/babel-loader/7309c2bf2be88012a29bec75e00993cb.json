{"remainingRequest":"/home/eric/Workspace/edustreamx/node_modules/thread-loader/dist/cjs.js!/home/eric/Workspace/edustreamx/node_modules/babel-loader/lib/index.js!/home/eric/Workspace/edustreamx/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/eric/Workspace/edustreamx/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/eric/Workspace/edustreamx/src/components/ChatBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/eric/Workspace/edustreamx/src/components/ChatBox.vue","mtime":1554791366359},{"path":"/home/eric/Workspace/edustreamx/node_modules/cache-loader/dist/cjs.js","mtime":1554753029931},{"path":"/home/eric/Workspace/edustreamx/node_modules/thread-loader/dist/cjs.js","mtime":1554753030639},{"path":"/home/eric/Workspace/edustreamx/node_modules/babel-loader/lib/index.js","mtime":1554753029823},{"path":"/home/eric/Workspace/edustreamx/node_modules/cache-loader/dist/cjs.js","mtime":1554753029931},{"path":"/home/eric/Workspace/edustreamx/node_modules/vue-loader/lib/index.js","mtime":1554753030671}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ChatMessage from './ChatMessage';\nexport default {\n  name: \"ChatBox\",\n  data: function data() {\n    return {\n      chatMessages: [],\n      participants: [],\n      p_loaded: false,\n      activeTab: 1,\n      cur_id: 0,\n      chat: \"\"\n    };\n  },\n  props: [\"socket\", \"username\", \"roomName\"],\n  watch: {\n    socket: function socket(newval, oldval) {\n      this.socket = newval;\n      this.socket.receiveChat = this.receiveChat;\n      this.socket.userJoin = this.userJoin;\n    },\n    activeTab: function activeTab() {\n      var _this = this;\n\n      if (this.activeTab == 2 && !this.p_loaded) {\n        this.p_loaded = true;\n        console.log(\"roomID\", this.roomName);\n        fetch('/queryRoom?roomName=' + this.roomName).then(function (response) {\n          return response.json();\n        }).then(function (resp) {\n          _this.participants = resp.participants;\n        }).catch(function (e) {\n          return console.log('fetch failed', e);\n        });\n      }\n    }\n  },\n  components: {\n    ChatMessage: ChatMessage\n  },\n  methods: {\n    addChat: function addChat() {\n      this.socket.sendMessage({\n        type: \"userChat\",\n        text: this.chat,\n        username: this.username\n      });\n      /*testing\n      this.receiveChat(this.chat, this.username);*/\n    },\n    userJoin: function userJoin(username, id) {\n      this.participants.push({\n        username: username,\n        id: id\n      });\n    },\n    receiveChat: function receiveChat(text, username) {\n      // (from server)\n      var msg_obj = {\n        username: username,\n        message: text,\n        question: text.substr(-1) === '?',\n        id: this.cur_id++\n      };\n      this.chatMessages.push(msg_obj);\n      var chatdisplay = document.getElementById(\"chatdisplay\");\n      chatdisplay.scrollTop = chatdisplay.scrollHeight;\n    }\n  }\n};",{"version":3,"sources":["ChatBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,OAAA,WAAA,MAAA,eAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,KAHA;AAIA,MAAA,SAAA,EAAA,CAJA;AAKA,MAAA,MAAA,EAAA,CALA;AAMA,MAAA,IAAA,EAAA;AANA,KAAA;AAQA,GAXA;AAYA,EAAA,KAAA,EAAA,CAAA,QAAA,EAAA,UAAA,EAAA,UAAA,CAZA;AAaA,EAAA,KAAA,EAAA;AACA,IAAA,MADA,kBACA,MADA,EACA,MADA,EACA;AACA,WAAA,MAAA,GAAA,MAAA;AACA,WAAA,MAAA,CAAA,WAAA,GAAA,KAAA,WAAA;AACA,WAAA,MAAA,CAAA,QAAA,GAAA,KAAA,QAAA;AACA,KALA;AAMA,IAAA,SAAA,EAAA,qBAAA;AAAA;;AACA,UAAA,KAAA,SAAA,IAAA,CAAA,IAAA,CAAA,KAAA,QAAA,EAAA;AACA,aAAA,QAAA,GAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,KAAA,QAAA;AACA,QAAA,KAAA,CAAA,yBAAA,KAAA,QAAA,CAAA,CACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,iBAAA,QAAA,CAAA,IAAA,EAAA;AACA,SAHA,EAGA,IAHA,CAGA,UAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,IAAA,CAAA,YAAA;AACA,SALA,EAKA,KALA,CAKA,UAAA,CAAA;AAAA,iBACA,OAAA,CAAA,GAAA,CAAA,cAAA,EAAA,CAAA,CADA;AAAA,SALA;AAQA;AACA;AAnBA,GAbA;AAkCA,EAAA,UAAA,EAAA;AACA,IAAA,WAAA,EAAA;AADA,GAlCA;AAqCA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,WAAA,MAAA,CAAA,WAAA,CAAA;AACA,QAAA,IAAA,EAAA,UADA;AAEA,QAAA,IAAA,EAAA,KAAA,IAFA;AAGA,QAAA,QAAA,EAAA,KAAA;AAHA,OAAA;AAKA;;AAEA,KATA;AAUA,IAAA,QAVA,oBAUA,QAVA,EAUA,EAVA,EAUA;AACA,WAAA,YAAA,CAAA,IAAA,CAAA;AAAA,QAAA,QAAA,EAAA,QAAA;AAAA,QAAA,EAAA,EAAA;AAAA,OAAA;AACA,KAZA;AAaA,IAAA,WAbA,uBAaA,IAbA,EAaA,QAbA,EAaA;AAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,QAAA,EAAA,QADA;AAEA,QAAA,OAAA,EAAA,IAFA;AAGA,QAAA,QAAA,EAAA,IAAA,CAAA,MAAA,CAAA,CAAA,CAAA,MAAA,GAHA;AAIA,QAAA,EAAA,EAAA,KAAA,MAAA;AAJA,OAAA;AAMA,WAAA,YAAA,CAAA,IAAA,CAAA,OAAA;AACA,UAAA,WAAA,GAAA,QAAA,CAAA,cAAA,CAAA,aAAA,CAAA;AACA,MAAA,WAAA,CAAA,SAAA,GAAA,WAAA,CAAA,YAAA;AACA;AAvBA;AArCA,CAAA","sourcesContent":["<template>\n<div id=\"chatbox\">\n    <b-nav tabs>\n        <b-nav-item v-on:click=\"activeTab=1\" v-bind:active=\"activeTab===1\">Chat</b-nav-item>\n        <b-nav-item v-on:click=\"activeTab=2\" v-bind:active=\"activeTab===2\">Participants</b-nav-item>\n    </b-nav>\n    <div v-if=\"activeTab===1\">\n        <ul id=\"chatdisplay\">\n            <ChatMessage\n                v-for=\"msg in chatMessages\"\n                v-bind:key=\"msg.id\"\n                v-bind:message=\"msg.username + ': ' + msg.message\"\n                v-bind:question=\"msg.question\"\n            ></ChatMessage>\n        </ul>\n        <form v-on:submit=\"addChat\" id=\"msg_form\">\n            <b-form-input id=\"msg_input\" v-model=\"chat\" placeholder=\"type your message\"></b-form-input>\n            <b-button v-on:click=\"addChat\" id=\"msg_button\">Post Message</b-button>\n        </form>\n    </div>\n    <div v-else>\n        <ul id=\"participants\">\n            <li\n                v-for=\"p in participants\"\n                v-bind:key=\"p.id\"\n            >{{p.username}}</li>\n        </ul>\n    </div>\n</div>\n</template>\n\n<script>\n\nimport ChatMessage from './ChatMessage'\nexport default {\n    name: \"ChatBox\",\n    data: function() {\n        return {\n            chatMessages: [],\n            participants: [],\n            p_loaded: false,\n            activeTab: 1,\n            cur_id: 0,\n            chat: \"\"\n        }\n    },\n    props: [\"socket\", \"username\", \"roomName\"],\n    watch: {\n      socket(newval, oldval) {\n        this.socket = newval;\n        this.socket.receiveChat = this.receiveChat;\n        this.socket.userJoin = this.userJoin;\n      },\n      activeTab : function() {\n          if (this.activeTab == 2 && !this.p_loaded) {\n             this.p_loaded = true\n             console.log(\"roomID\", this.roomName)\n            fetch('/queryRoom?roomName='+this.roomName)\n            .then(function(response) {\n                return response.json();\n            }).then((resp) => {\n                this.participants = resp.participants\n            }).catch(e => \n                console.log('fetch failed', e)\n            )\n          }\n      }\n    },\n    components: {\n        ChatMessage\n    },\n    methods: {\n        addChat() {\n          this.socket.sendMessage({\n            type: \"userChat\",\n            text: this.chat,\n            username: this.username,\n          })\n          /*testing\n          this.receiveChat(this.chat, this.username);*/\n        },\n        userJoin(username, id) {\n            this.participants.push({username:username, id:id});\n        },\n        receiveChat(text, username) { // (from server)\n            var msg_obj = {\n                username: username,\n                message: text,\n                question: text.substr(-1) === '?',\n                id: this.cur_id++ \n            }\n            this.chatMessages.push(msg_obj);\n            var chatdisplay = document.getElementById(\"chatdisplay\");\n            chatdisplay.scrollTop = chatdisplay.scrollHeight;\n        }\n    }\n}\n</script>\n\n<style scoped>\n    div {\n        height:100%;\n    }\n    li {\n        list-style-type: none\n    }\n    #chatbox {\n        width: 30%;\n        float: right;\n    }\n    form, button {\n        margin-top: 15px\n    }\n    #chatdisplay {\n        height:70%;\n        overflow-y: scroll;\n        list-style-type: none;\n    }\n</style>\n"],"sourceRoot":"src/components"}]}