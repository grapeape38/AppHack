{"remainingRequest":"/home/eric/Workspace/edustreamx/node_modules/babel-loader/lib/index.js!/home/eric/Workspace/edustreamx/node_modules/eslint-loader/index.js??ref--13-0!/home/eric/Workspace/edustreamx/src/canvas.js","dependencies":[{"path":"/home/eric/Workspace/edustreamx/src/canvas.js","mtime":1554756036939},{"path":"/home/eric/Workspace/edustreamx/node_modules/cache-loader/dist/cjs.js","mtime":1554753029931},{"path":"/home/eric/Workspace/edustreamx/node_modules/babel-loader/lib/index.js","mtime":1554753029823},{"path":"/home/eric/Workspace/edustreamx/node_modules/eslint-loader/index.js","mtime":1554753030083}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.fill\";\nimport _classCallCheck from \"/home/eric/Workspace/edustreamx/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/eric/Workspace/edustreamx/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\n\nvar CanvasDraw =\n/*#__PURE__*/\nfunction () {\n  function CanvasDraw(canvas) {\n    var _this = this;\n\n    _classCallCheck(this, CanvasDraw);\n\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d');\n    this.color = \"black\";\n    this.pensize = 5;\n    this.pts = [];\n    var ps = 5;\n\n    this.canvas.onmousedown = function (e) {\n      return _this.pen = true;\n    };\n\n    this.canvas.onmouseup = function (e) {\n      _this.pen = false;\n      _this.pts[_this.pts.length - 1].end = true;\n    };\n\n    this.canvas.onmousemove = function (e) {\n      if (_this.pen) _this.pts.push({\n        x: e.offsetX,\n        y: e.offsetY,\n        color: _this.color,\n        pensize: _this.pensize\n      });\n\n      _this.repaint();\n    };\n\n    this.resize();\n  }\n\n  _createClass(CanvasDraw, [{\n    key: \"resize\",\n    value: function resize() {\n      this.canvas.width = this.canvas.clientWidth;\n      this.canvas.height = this.canvas.clientHeight;\n      this.ctx.fillStyle = 'white';\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n      this.ctx.fill();\n      this.repaint();\n    }\n  }, {\n    key: \"main\",\n    value: function main() {\n      var _this2 = this;\n\n      requestAnimationFrame(function () {\n        return _this2.main();\n      }); //this.repaint();\n    }\n  }, {\n    key: \"setFGColor\",\n    value: function setFGColor(color) {\n      this.color = color;\n    }\n  }, {\n    key: \"setPenSize\",\n    value: function setPenSize(size) {\n      this.pensize = size;\n    }\n  }, {\n    key: \"clearCanvas\",\n    value: function clearCanvas() {\n      this.ctx.fillStyle = 'white';\n      this.ctx.fillRect(0, 0, canvas.width, canvas.height);\n      this.ctx.fill();\n      this.pts = [];\n    }\n  }, {\n    key: \"repaint\",\n    value: function repaint() {\n      if (this.pts.length == 0) return;\n      this.ctx.strokeStyle = this.pts[0].color;\n      this.ctx.lineWidth = this.pts[0].pensize;\n      this.ctx.beginPath();\n\n      for (var i = 1; i < this.pts.length; i++) {\n        var prev = this.pts[i - 1];\n        var curr = this.pts[i];\n        this.ctx.strokeStyle = prev.color;\n        this.ctx.lineWidth = prev.pensize;\n\n        if (prev.end || prev.color != curr.color || prev.pensize != curr.pensize) {\n          this.ctx.stroke();\n          this.ctx.beginPath();\n        } else {\n          this.ctx.moveTo(prev.x, prev.y);\n          this.ctx.lineTo(curr.x, curr.y);\n        }\n      }\n\n      this.ctx.stroke();\n    }\n  }]);\n\n  return CanvasDraw;\n}();\n\nexport default CanvasDraw;",{"version":3,"sources":["/home/eric/Workspace/edustreamx/src/canvas.js"],"names":["CanvasDraw","canvas","ctx","getContext","color","pensize","pts","ps","onmousedown","e","pen","onmouseup","length","end","onmousemove","push","x","offsetX","y","offsetY","repaint","resize","width","clientWidth","height","clientHeight","fillStyle","fillRect","fill","requestAnimationFrame","main","size","strokeStyle","lineWidth","beginPath","i","prev","curr","stroke","moveTo","lineTo"],"mappings":"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","sourcesContent":["class CanvasDraw {\n    constructor(canvas) {\n        this.canvas = canvas\n        this.ctx = canvas.getContext('2d')\n        this.color = \"black\"\n        this.pensize = 5\n\n        this.pts = []\n        var ps = 5\n\n        this.canvas.onmousedown = (e) => this.pen = true;\n        this.canvas.onmouseup = (e) => {\n            this.pen = false;\n            this.pts[this.pts.length - 1].end = true;\n        }\n        this.canvas.onmousemove = (e) => {\n            if (this.pen) this.pts.push({ x : e.offsetX, y : e.offsetY, color: this.color, pensize: this.pensize});\n            this.repaint();\n        }\n        this.resize();\n    }\n\n    resize() {\n      this.canvas.width = this.canvas.clientWidth;\n      this.canvas.height = this.canvas.clientHeight;\n      this.ctx.fillStyle =  'white'\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n      this.ctx.fill()\n      this.repaint();\n    }\n\n    main() {\n       requestAnimationFrame(() => this.main());\n       //this.repaint();\n    }\n\n    setFGColor(color) {\n        this.color = color\n    }\n\n    setPenSize(size) {\n      this.pensize = size\n    }\n\n    clearCanvas() {\n        this.ctx.fillStyle =  'white'\n        this.ctx.fillRect(0, 0, canvas.width, canvas.height);\n        this.ctx.fill()\n        this.pts = []\n    }\n    \n    repaint() {\n      if (this.pts.length == 0)\n        return;\n      this.ctx.strokeStyle = this.pts[0].color\n      this.ctx.lineWidth = this.pts[0].pensize\n      this.ctx.beginPath()\n      for (var i = 1; i < this.pts.length; i++) {\n        var prev = this.pts[i-1];\n        var curr = this.pts[i];\n        this.ctx.strokeStyle = prev.color;\n        this.ctx.lineWidth = prev.pensize;\n        if (prev.end || prev.color != curr.color || prev.pensize != curr.pensize) {\n          this.ctx.stroke();\n          this.ctx.beginPath();\n        }\n        else {\n          this.ctx.moveTo(prev.x, prev.y);\n          this.ctx.lineTo(curr.x, curr.y);\n        }\n      }\n      this.ctx.stroke();\n    }\n}\n\nexport default CanvasDraw"]}]}