{"remainingRequest":"/home/daniel/edustreamx/node_modules/thread-loader/dist/cjs.js!/home/daniel/edustreamx/node_modules/babel-loader/lib/index.js!/home/daniel/edustreamx/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/daniel/edustreamx/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/daniel/edustreamx/src/components/Classroom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/daniel/edustreamx/src/components/Classroom.vue","mtime":1554568208659},{"path":"/home/daniel/edustreamx/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/daniel/edustreamx/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/daniel/edustreamx/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/daniel/edustreamx/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/daniel/edustreamx/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _JSON$stringify from \"/home/daniel/edustreamx/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { TeacherNode, RTCNode } from '../rtc.js';\nimport Canvas from './Canvas';\nimport ChatBox from './ChatBox';\nimport StudentDash from './StudentDash';\nimport TeacherDash from './TeacherDash';\n\nfunction postData() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  // Default options are marked with *\n  return fetch(url, {\n    method: \"POST\",\n    // *GET, POST, PUT, DELETE, etc.\n    mode: \"cors\",\n    // no-cors, cors, *same-origin\n    cache: \"no-cache\",\n    // *default, no-cache, reload, force-cache, only-if-cached\n    credentials: \"same-origin\",\n    // include, *same-origin, omit\n    headers: {\n      \"Content-Type\": \"application/json\" // \"Content-Type\": \"application/x-www-form-urlencoded\",\n\n    },\n    redirect: \"follow\",\n    // manual, *follow, error\n    referrer: \"no-referrer\",\n    // no-referrer, *client\n    body: _JSON$stringify(data) // body data type must match \"Content-Type\" header\n\n  }).then(function (response) {\n    return response.json();\n  }) // parses JSON response into native Javascript objects \n  .catch(function (err) {\n    return console.log(\"error with response from fetch\", err);\n  });\n}\n\nexport default {\n  name: \"Classroom\",\n  props: [\"clientType\", \"canvas\", \"roomID\", \"roomName\", \"username\"],\n  data: function data() {\n    return {\n      broadcasting: false,\n      socket: null\n    };\n  },\n  components: {\n    Canvas: Canvas,\n    ChatBox: ChatBox,\n    StudentDash: StudentDash,\n    TeacherDash: TeacherDash\n  },\n  created: function created() {\n    this.broadcasting = this.clientType === 'teacher';\n  },\n  methods: {\n    canvasCallback: function canvasCallback(c, v) {\n      var _this = this;\n\n      var canvas = c;\n      var video = v;\n      console.log(\"created room for type: \", this.clientType, canvas, video);\n\n      if (this.clientType === \"teacher\") {\n        this.rtc = new TeacherNode(canvas, video);\n        this.socket = this.rtc.socket;\n        this.rtc.socket.checkWS().then(function () {\n          _this.rtc.socket.sendMessage({\n            type: \"createRoom\",\n            roomName: _this.roomName\n          });\n\n          console.log(\"sent create room req\", _this.roomName);\n        }).catch(function (err) {\n          return console.log(\"Unable to create classroom -- ws uninitialized\", err);\n        });\n      } else if (this.clientType === \"student\") {\n        this.rtc = new RTCNode(video);\n        this.socket = this.rtc.socket;\n        this.rtc.socket.checkWS().then(function () {\n          _this.rtc.socket.sendMessage({\n            type: \"joinRoom\",\n            roomName: _this.roomID\n          });\n        }).catch(function (err) {\n          return console.log(\"Unable to join classroom -- \", err);\n        });\n      } else {\n        throw \"Unknown client type: \" + this.clientType;\n      }\n    },\n    requestAccess: function requestAccess() {\n      postData(\"/reqbroadcast\", {\n        cid: this.rtc.clientID\n      }).then(function (json) {}).catch(function (err) {\n        return console.log(\"err requsting access\", err);\n      });\n    },\n    grantReq: function grantReq(cid) {\n      console.log(\"cid = \", cid);\n      this.socket.sendMessage({\n        type: \"grantBroadcast\",\n        pid: this.rtc.clientID,\n        cid: cid\n      });\n    }\n  }\n};",{"version":3,"sources":["Classroom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA,SAAA,WAAA,EAAA,OAAA,QAAA,WAAA;AACA,OAAA,MAAA,MAAA,UAAA;AACA,OAAA,OAAA,MAAA,WAAA;AACA,OAAA,WAAA,MAAA,eAAA;AACA,OAAA,WAAA,MAAA,eAAA;;AACA,SAAA,QAAA,GAAA;AAAA,MAAA,GAAA;AAAA,MAAA,IAAA,uEAAA,EAAA;AACA;AACA,SAAA,KAAA,CAAA,GAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AACA;AACA,IAAA,IAAA,EAAA,MAFA;AAEA;AACA,IAAA,KAAA,EAAA,UAHA;AAGA;AACA,IAAA,WAAA,EAAA,aAJA;AAIA;AACA,IAAA,OAAA,EAAA;AACA,sBAAA,kBADA,CAEA;;AAFA,KALA;AASA,IAAA,QAAA,EAAA,QATA;AASA;AACA,IAAA,QAAA,EAAA,aAVA;AAUA;AACA,IAAA,IAAA,EAAA,gBAAA,IAAA,CAXA,CAWA;;AAXA,GAAA,CAAA,CAaA,IAbA,CAaA,UAAA,QAAA;AAAA,WAAA,QAAA,CAAA,IAAA,EAAA;AAAA,GAbA,EAaA;AAbA,GAcA,KAdA,CAcA,UAAA,GAAA;AAAA,WAAA,OAAA,CAAA,GAAA,CAAA,gCAAA,EAAA,GAAA,CAAA;AAAA,GAdA,CAAA;AAeA;;AAKA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,KAAA,EAAA,CAAA,YAAA,EAAA,QAAA,EAAA,QAAA,EAAA,UAAA,EAAA,UAAA,CAFA;AAGA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,KADA;AAEA,MAAA,MAAA,EAAA;AAFA,KAAA;AAIA,GARA;AASA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AAEA,IAAA,OAAA,EAAA,OAFA;AAGA,IAAA,WAAA,EAAA,WAHA;AAIA,IAAA,WAAA,EAAA;AAJA,GATA;AAeA,EAAA,OAAA,EAAA,mBAAA;AACA,SAAA,YAAA,GAAA,KAAA,UAAA,KAAA,SAAA;AACA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,CADA,EACA,CADA,EACA;AAAA;;AACA,UAAA,MAAA,GAAA,CAAA;AACA,UAAA,KAAA,GAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,yBAAA,EAAA,KAAA,UAAA,EAAA,MAAA,EAAA,KAAA;;AACA,UAAA,KAAA,UAAA,KAAA,SAAA,EAAA;AACA,aAAA,GAAA,GAAA,IAAA,WAAA,CAAA,MAAA,EAAA,KAAA,CAAA;AACA,aAAA,MAAA,GAAA,KAAA,GAAA,CAAA,MAAA;AACA,aAAA,GAAA,CAAA,MAAA,CAAA,OAAA,GAAA,IAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,GAAA,CAAA,MAAA,CAAA,WAAA,CAAA;AAAA,YAAA,IAAA,EAAA,YAAA;AAAA,YAAA,QAAA,EAAA,KAAA,CAAA;AAAA,WAAA;;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,sBAAA,EAAA,KAAA,CAAA,QAAA;AACA,SAHA,EAIA,KAJA,CAIA,UAAA,GAAA;AAAA,iBAAA,OAAA,CAAA,GAAA,CAAA,gDAAA,EAAA,GAAA,CAAA;AAAA,SAJA;AAKA,OARA,MASA,IAAA,KAAA,UAAA,KAAA,SAAA,EAAA;AACA,aAAA,GAAA,GAAA,IAAA,OAAA,CAAA,KAAA,CAAA;AACA,aAAA,MAAA,GAAA,KAAA,GAAA,CAAA,MAAA;AACA,aAAA,GAAA,CAAA,MAAA,CAAA,OAAA,GAAA,IAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,GAAA,CAAA,MAAA,CAAA,WAAA,CAAA;AACA,YAAA,IAAA,EAAA,UADA;AAEA,YAAA,QAAA,EAAA,KAAA,CAAA;AAFA,WAAA;AAIA,SALA,EAMA,KANA,CAMA,UAAA,GAAA;AAAA,iBAAA,OAAA,CAAA,GAAA,CAAA,8BAAA,EAAA,GAAA,CAAA;AAAA,SANA;AAOA,OAVA,MAWA;AACA,cAAA,0BAAA,KAAA,UAAA;AACA;AACA,KA5BA;AA6BA,IAAA,aA7BA,2BA6BA;AACA,MAAA,QAAA,CAAA,eAAA,EAAA;AACA,QAAA,GAAA,EAAA,KAAA,GAAA,CAAA;AADA,OAAA,CAAA,CAEA,IAFA,CAEA,UAAA,IAAA,EAAA,CAAA,CAFA,EAGA,KAHA,CAGA,UAAA,GAAA;AAAA,eAAA,OAAA,CAAA,GAAA,CAAA,sBAAA,EAAA,GAAA,CAAA;AAAA,OAHA;AAIA,KAlCA;AAmCA,IAAA,QAnCA,oBAmCA,GAnCA,EAmCA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,GAAA;AACA,WAAA,MAAA,CAAA,WAAA,CAAA;AACA,QAAA,IAAA,EAAA,gBADA;AAEA,QAAA,GAAA,EAAA,KAAA,GAAA,CAAA,QAFA;AAGA,QAAA,GAAA,EAAA;AAHA,OAAA;AAKA;AA1CA;AAlBA,CAAA","sourcesContent":["<template>\n    <div>\n        <h1>Welcome to the Classroom</h1>\n        <div id=\"main\">\n            <Canvas v-bind:broadcasting=\"broadcasting\"\n                    clientType=\"clientType\" :canvasCallback=\"canvasCallback\"></Canvas>\n            <ChatBox :socket=\"socket\" :username=\"username\"></ChatBox>\n            <!-- <StudentDash v-on:requestAcc=\"requestAccess\" :socket=\"socket\" v-if=\"clientType==='student'\" :broadcasting=\"broadcasting\"></StudentDash>--> \n            <!-- <TeacherDash v-on:grantReq=\"grantReq($event)\" :socket=\"socket\"\n            v-else :broadcasting=\"broadcasting\" :requestActive=\"requestActive\"></TeacherDash> -->\n        </div>\n    </div>\n</template>\n\n<script>\nimport { TeacherNode, RTCNode }  from '../rtc.js'\nimport Canvas from './Canvas'\nimport ChatBox from './ChatBox'\nimport StudentDash from './StudentDash'\nimport TeacherDash from './TeacherDash'\nfunction postData(url = ``, data = {}) {\n  // Default options are marked with *\n    return fetch(url, {\n        method: \"POST\", // *GET, POST, PUT, DELETE, etc.\n        mode: \"cors\", // no-cors, cors, *same-origin\n        cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n        credentials: \"same-origin\", // include, *same-origin, omit\n        headers: {\n            \"Content-Type\": \"application/json\",\n            // \"Content-Type\": \"application/x-www-form-urlencoded\",\n        },\n        redirect: \"follow\", // manual, *follow, error\n        referrer: \"no-referrer\", // no-referrer, *client\n        body: JSON.stringify(data), // body data type must match \"Content-Type\" header\n    })\n    .then(response => response.json()) // parses JSON response into native Javascript objects \n    .catch(err => console.log(\"error with response from fetch\", err));\n} \n\n\n\n\nexport default {\n    name: \"Classroom\",\n    props: [\"clientType\", \"canvas\", \"roomID\", \"roomName\", \"username\"],\n    data: function() {\n        return { \n          broadcasting: false,\n          socket: null,\n        };\n    },\n    components: {\n        Canvas,\n        ChatBox,\n        StudentDash,\n        TeacherDash\n    },\n    created: function() {\n        this.broadcasting = this.clientType === 'teacher'\n    },\n    methods: {\n        canvasCallback(c, v) {\n            var canvas = c\n            var video = v\n            console.log(\"created room for type: \", this.clientType, canvas, video);\n            if (this.clientType === \"teacher\") {\n              this.rtc = new TeacherNode(canvas, video);\n              this.socket = this.rtc.socket;\n              this.rtc.socket.checkWS().then(() => {\n                this.rtc.socket.sendMessage({ type: \"createRoom\", roomName: this.roomName });\n                console.log(\"sent create room req\", this.roomName);\n              })\n              .catch(err => console.log(\"Unable to create classroom -- ws uninitialized\", err));\n            }\n            else if (this.clientType === \"student\") {\n              this.rtc = new RTCNode(video);\n              this.socket = this.rtc.socket;\n              this.rtc.socket.checkWS().then(() => {\n                this.rtc.socket.sendMessage({ \n                  type: \"joinRoom\",\n                  roomName: this.roomID,\n                })\n              })\n              .catch(err => console.log(\"Unable to join classroom -- \", err));\n            }\n            else {\n              throw \"Unknown client type: \" + this.clientType;\n            }\n          },\n        requestAccess() {\n          postData(\"/reqbroadcast\", {\n            cid: this.rtc.clientID,\n          }).then(json => {})\n          .catch(err => console.log(\"err requsting access\", err));\n        },\n        grantReq(cid) {\n          console.log(\"cid = \", cid);\n          this.socket.sendMessage( {\n            type: \"grantBroadcast\",\n            pid: this.rtc.clientID,\n            cid: cid,\n          })\n        }\n    }\n}\n</script>"],"sourceRoot":"src/components"}]}